<!DOCTYPE html> <html> <head> <title>Log de Registros</title> <style> body { font-family: sans-serif; background: #f2f2f2; padding: 20px; } h2 { text-align: center; } table { width: 100%; max-width: 1000px; margin: auto; border-collapse: collapse; background: white; box-shadow: 0 0 10px rgba(0,0,0,0.1); } th, td { border: 1px solid #ccc; padding: 8px 12px; text-align: left; } th { background: #eee; } </style> </head> <body> <h2>Log de Actividad</h2> <table id="log-table"> <thead> <tr> {% for columna in columnas %} <th>{{ columna }}</th> {% endfor %} </tr> </thead> <tbody id="log-body"> {% for fila in registros %} <tr> {% for columna in columnas %} <td>{{ fila[columna] }}</td> {% endfor %} </tr> {% endfor %} </tbody> </table>

    <script>
    // Refresca cada 30 segundos
    setInterval(() => {
        fetch("/api/log")
            .then(response => {
                if (!response.ok) throw new Error("Error al actualizar");
                return response.json();
            })
            .then(data => {
                const body = document.getElementById("log-body");
                body.innerHTML = "";
                data.registros.forEach(fila => {
                    const tr = document.createElement("tr");
                    data.columnas.forEach(col => {
                        const td = document.createElement("td");
                        td.textContent = fila[col];
                        tr.appendChild(td);
                    });
                    body.appendChild(tr);
                });
            })
            .catch(error => {
                console.error("Error al actualizar log:", error);
            });
    }, 30000); // 30 segundos
</script>
</body> </html>
